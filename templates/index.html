<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Real-Time Obamify</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<h1>Draw & Obamify!</h1>

<div>
  <canvas id="drawCanvas" width="512" height="512" style="border:1px solid #000;"></canvas>
  <img id="obamaPreview" width="512" height="512">
</div>

<script>
const canvas = document.getElementById("drawCanvas");
const ctx = canvas.getContext("2d");
let drawing = false;

// WebSocket
const ws = new WebSocket("wss://obamify-web.onrender.com/ws");

canvas.onmousedown = () => drawing = true;
canvas.onmouseup = () => drawing = false;
canvas.onmousemove = (e) => {
    if (!drawing) return;
    ctx.fillRect(e.offsetX, e.offsetY, 4, 4); // bigger brush
    sendCanvas();
};

function sendCanvas() {
    const dataURL = canvas.toDataURL("image/png");
    ws.send(dataURL);
}

ws.onmessage = (msg) => {
    document.getElementById("obamaPreview").src = msg.data;
};
</script>
</body>
</html>
